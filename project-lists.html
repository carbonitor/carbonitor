<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container {
            display: flex;
            flex-direction: column;
        }
        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .header-container h1 {
            margin-bottom: 1rem;
        }
        .project-section {
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        .login-button {
            margin-left: auto;
            align-self: flex-start;
            height: 100%;
        }
        .project-list-container {
            display: flex;
            flex-direction: column;
            flex: 1;
        }
    </style>
</head>
<body>

<div class="container mt-5">
    <div class="header-container">
        <h1>Project List</h1>
        <button class="btn btn-primary login-button">Login</button>
    </div>

    <!-- Filter and Search Bar Section -->
    <div class="row mb-3 project-section">
        <div class="col-md-12 project-list-container">
            <!-- Filter Section -->
            <div class="d-flex mb-3">
                <select id="filter-status" class="form-select me-2" aria-label="Project Status">
                    <option value="" selected>Project Status</option>
                    <option value="Planned">Planned</option>
                    <option value="Ongoing">Ongoing</option>
                    <option value="Completed">Completed</option>
                </select>
                <select id="filter-type" class="form-select me-2" aria-label="Project Type">
                    <option value="" selected>Project Type</option>
                </select>
                <select id="filter-country" class="form-select" aria-label="Country">
                    <option value="" selected>Country</option>
                    <option value="Malaysia">Malaysia</option>
                    <option value="Indonesia">Indonesia</option>
                </select>
            </div>
            <!-- Search Bar -->
            <div class="input-group mb-4">
                <input id="search-bar" type="text" class="form-control" placeholder="Search projects...">
            </div>

            <!-- Project Table -->
            <h2>All Projects</h2>
            <table class="table table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>Project Details</th>
                        <th>Status</th>
                        <th>Project Type</th>
                        <th>Country</th>
                        <th>File</th>
                    </tr>
                </thead>
                <tbody id="project-list">
                    <!-- Project data will be dynamically added here -->
                </tbody>
            </table>

            <!-- Pagination Section -->
            <nav>
                <ul class="pagination">
                    <!-- Pagination items will be dynamically generated -->
                </ul>
            </nav>
            <div id="project-count"></div>
        </div>
    </div>
</div>

<script>
    let currentPage = 1;
    const rowsPerPage = 10;

    // Fetch project data from the admin panel (simulated for now)
    const projects = [
        // Example data
        { id: '1', details: 'Project A', status: 'Planned', type: 'Infrastructure', country: 'Malaysia', file: 'fileA.pdf' },
        { id: '2', details: 'Project B', status: 'Ongoing', type: 'Health', country: 'Indonesia', file: 'fileB.pdf' },
        // More project data can be added here...
    ];

    function loadProjects() {
        const projectList = document.getElementById('project-list');
        projectList.innerHTML = ''; // Clear the table before adding rows

        projects.forEach(project => {
            const newRow = document.createElement('tr');
            newRow.dataset.status = project.status;
            newRow.dataset.type = project.type;
            newRow.dataset.country = project.country;
            newRow.innerHTML = `
                <td>${project.id}</td>
                <td>${project.details}</td>
                <td>${project.status}</td>
                <td>${project.type}</td>
                <td>${project.country}</td>
                <td><a href="#" download="${project.file}">${project.file}</a></td>
            `;
            projectList.appendChild(newRow);
        });

        updateFilters();
        applyFilters();
    }

    function applyFilters() {
        const status = document.getElementById('filter-status').value.toLowerCase();
        const type = document.getElementById('filter-type').value.toLowerCase();
        const country = document.getElementById('filter-country').value.toLowerCase();
        const search = document.getElementById('search-bar').value.toLowerCase();

        const rows = Array.from(document.querySelectorAll('#project-list tr'));
        let filteredRows = rows.filter(row => {
            const rowStatus = row.dataset.status.toLowerCase();
            const rowType = row.dataset.type.toLowerCase();
            const rowCountry = row.dataset.country.toLowerCase();
            const rowText = row.innerText.toLowerCase();

            return (
                (status === '' || rowStatus.includes(status)) &&
                (type === '' || rowType.includes(type)) &&
                (country === '' || rowCountry.includes(country)) &&
                (search === '' || rowText.includes(search))
            );
        });

        displayRows(filteredRows);
        updatePagination(filteredRows.length);
    }

    function displayRows(rows) {
        const start = (currentPage - 1) * rowsPerPage;
        const end = start + rowsPerPage;
        const paginatedRows = rows.slice(start, end);

        const projectList = document.getElementById('project-list');
        projectList.innerHTML = '';
        paginatedRows.forEach(row => {
            projectList.appendChild(row);
        });
    }

    function updatePagination(totalRows) {
        const totalPages = Math.ceil(totalRows / rowsPerPage);

        const pagination = document.querySelector('.pagination');
        pagination.innerHTML = '';

        const prevPage = document.createElement('li');
        prevPage.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
        prevPage.innerHTML = `<a class="page-link" href="#" tabindex="-1" aria-disabled="true">&laquo;</a>`;
        prevPage.addEventListener('click', () => changePage(currentPage - 1));
        pagination.appendChild(prevPage);

        for (let i = 1; i <= totalPages; i++) {
            const pageItem = document.createElement('li');
            pageItem.className = `page-item ${i === currentPage ? 'active' : ''}`;
            pageItem.innerHTML = `<a class="page-link" href="#">${i}</a>`;
            pageItem.addEventListener('click', () => changePage(i));
            pagination.appendChild(pageItem);
        }

        const nextPage = document.createElement('li');
        nextPage.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
        nextPage.innerHTML = `<a class="page-link" href="#">&raquo;</a>`;
        nextPage.addEventListener('click', () => changePage(currentPage + 1));
        pagination.appendChild(nextPage);

        document.getElementById('project-count').textContent = `${(currentPage - 1) * rowsPerPage + 1}-${Math.min(currentPage * rowsPerPage, totalRows)} of ${totalRows}`;
    }

    function changePage(pageNumber) {
        currentPage = pageNumber;
        applyFilters();
    }

    function updateFilters() {
        const projectTypes = new Set();
        const rows = Array.from(document.querySelectorAll('#project-list tr'));

        rows.forEach(row => {
            projectTypes.add(row.dataset.type);
        });

        const filterType = document.getElementById('filter-type');
        filterType.innerHTML = `<option value="" selected>Project Type</option>`;
        projectTypes.forEach(type => {
            const option = document.createElement('option');
            option.value = type;
            option.textContent = type;
            filterType.appendChild(option);
        });
    }

    document.getElementById('filter-status').addEventListener('change', applyFilters);
    document.getElementById('filter-type').addEventListener('change', applyFilters);
    document.getElementById('filter-country').addEventListener('change', applyFilters);
    document.getElementById('search-bar').addEventListener('input', applyFilters);

    // Load initial data
    loadProjects();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
